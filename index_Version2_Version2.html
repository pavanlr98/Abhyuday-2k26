<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Watch Video â€” Abhyuday 2026</title>

  <style>
    :root {
      --bg:#0f1724;
      --card:#071024;
      --accent:#06b6d4;
      --text:#e6eef8;
    }

    html,body {
      height:100%;
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background:var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .card {
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:20px;
      border-radius:14px;
      width:min(960px,96%);
      box-shadow:0 6px 30px rgba(2,6,23,0.6);
    }

    /* ===== HEADER ===== */
    .header {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:16px;
      margin-bottom:18px;
      flex-wrap:wrap;
      text-align:center;
    }

    .logo {
      max-width:90px;
      height:auto;
    }

    .school-name {
      margin:0;
      font-size:1.35rem;
      font-weight:700;
      letter-spacing:0.5px;
    }

    .event-name {
      margin-top:4px;
      font-size:1.1rem;
      font-weight:600;
      color:var(--accent);
      letter-spacing:1px;
      text-transform:uppercase;
    }

    h1 {
      margin:10px 0 6px;
      font-size:1.2rem;
      text-align:center;
    }

    p {
      margin:0 0 14px;
      text-align:center;
      color:#9fbfdc;
    }

    /* ===== PLAYER ===== */
    .player-wrap {
      background:#000;
      border-radius:10px;
      overflow:hidden;
    }

    #player {
      width:100%;
      height:520px;
      background:#000;
    }

    /* ===== CONTROLS ===== */
    .controls {
      display:flex;
      gap:12px;
      align-items:center;
      margin-top:12px;
    }

    .btn {
      background:var(--accent);
      color:#042330;
      border:none;
      padding:8px 14px;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
    }

    .btn.secondary {
      background:transparent;
      color:var(--text);
      border:1px solid rgba(255,255,255,0.08);
    }

    .progress {
      flex:1;
      height:10px;
      background:#0b1a2b;
      border-radius:6px;
      overflow:hidden;
      cursor:not-allowed;
    }

    .progress i {
      display:block;
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#60a5fa,#06b6d4);
    }

    .time {
      min-width:100px;
      text-align:right;
      font-weight:600;
      color:#9fbfdc;
    }

    .hint {
      margin-top:10px;
      font-size:0.9rem;
      color:#a9c3d9;
      text-align:center;
    }

    @media(max-width:720px){
      #player { height:260px; }
      .logo { max-width:70px; }
    }
  </style>
</head>

<body>
<main class="card">

  <!-- HEADER -->
  <header class="header">
    <img src="pbs_logo.jpg" alt="PBS Logo" class="logo">
    <div>
      <div class="school-name">Parivarthana Business School, Mysore</div>
      <div class="event-name">Abhyuday 2026</div>
    </div>
  </header>

  <h1>Please watch the full video</h1>
  <p>The Google Form will open automatically after the video finishes.</p>

  <!-- VIDEO -->
  <div class="player-wrap">
    <div id="player"></div>
  </div>

  <!-- CONTROLS -->
  <div class="controls">
    <button id="playBtn" class="btn">Play</button>
    <button id="pauseBtn" class="btn secondary" style="display:none;">Pause</button>
    <div class="progress"><i id="bar"></i></div>
    <div id="timeLabel" class="time">0:00 / 0:00</div>
  </div>

  <div class="hint">
    â›” Forward seeking is disabled. Please watch the complete video.
  </div>

</main>

<script>
  const VIDEO_ID = "dY2sORh1SwM";   // YouTube video ID
  const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfL5MQHS-cdhk0r3rKpM2xXZARfmZNpCt6KDpD4D5gZdu_Ecg/viewform";

  const STORAGE_KEY = "yt_progress_" + VIDEO_ID;
  let player, duration = 0, lastTime = 0, timer;

  function format(t){
    const m = Math.floor(t/60);
    const s = Math.floor(t%60).toString().padStart(2,"0");
    return m + ":" + s;
  }

  function updateUI(){
    const cur = player.getCurrentTime();
    if(cur > lastTime + 0.3){
      player.seekTo(lastTime, true);   // ðŸš« BLOCK FORWARD SEEK
      return;
    }
    lastTime = Math.max(lastTime, cur);
    sessionStorage.setItem(STORAGE_KEY, lastTime);

    document.getElementById("bar").style.width =
      (cur/duration*100) + "%";

    document.getElementById("timeLabel").innerText =
      format(cur) + " / " + format(duration);
  }

  function onReady(){
    duration = player.getDuration();
    const saved = sessionStorage.getItem(STORAGE_KEY);
    if(saved) player.seekTo(saved, true);
  }

  function onStateChange(e){
    if(e.data === YT.PlayerState.PLAYING){
      document.getElementById("playBtn").style.display="none";
      document.getElementById("pauseBtn").style.display="";
      timer = setInterval(updateUI, 250);
    } else {
      clearInterval(timer);
      document.getElementById("playBtn").style.display="";
      document.getElementById("pauseBtn").style.display="none";
    }

    if(e.data === YT.PlayerState.ENDED){
      sessionStorage.removeItem(STORAGE_KEY);
      window.location.href = FORM_URL;
    }
  }

  document.getElementById("playBtn").onclick = () => {
    player.unMute();
    player.playVideo();
  };

  document.getElementById("pauseBtn").onclick = () => {
    player.pauseVideo();
  };

  // Load YouTube API
  const tag = document.createElement("script");
  tag.src = "https://www.youtube.com/iframe_api";
  document.body.appendChild(tag);

  window.onYouTubeIframeAPIReady = () => {
    player = new YT.Player("player", {
      videoId: VIDEO_ID,
      playerVars:{
        controls:0,
        disablekb:1,
        rel:0,
        fs:1
      },
      events:{
        onReady:onReady,
        onStateChange:onStateChange
      }
    });
  };
</script>

</body>
</html>
